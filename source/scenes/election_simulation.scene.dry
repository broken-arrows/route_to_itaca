title: Election Simulation
set-jump: post_election


- @2012_11: Catalan Parliament (November 2012)
# - @2015_9: Catalan Parliament (September 2015)
# - @2017_12: Catalan Parliament (December 2017)

@2012_11
on-arrival: {!
Q.election_type="cat";
Q.parties = ['ciu', 'erc', 'psc', 'ppc', 'icv', 'cs', 'cup', 'si', 'cdc', 'unio', 'jxsi', 'junts', 'pdcat', 'csqp', 'cecp', 'ecp', 'vox', 'ac'];

Q.parlament_constituencies = ["barcelona", "girona", "lleida", "tarragona"];
Q.parlament_seats = {
    "barcelona": 85,
    "girona": 17,
    "lleida": 15,
    "tarragona": 18
  }; // seats

Q.parlament_demographics = ["bussiness", "industrial", "middle", "young", "retired", "rural", "unemployed"]
Q.parlament_barcelona_pop_middle = 1246;
Q.parlament_barcelona_pop_retired = 1830;
Q.parlament_barcelona_pop_young = 1351;
Q.parlament_barcelona_pop_unemployed = 847;
Q.parlament_barcelona_pop_bussiness = 636;
Q.parlament_barcelona_pop_rural = 699;
Q.parlament_barcelona_pop_industrial = 1525;
Q.parlament_girona_pop_middle = 627;
Q.parlament_girona_pop_retired = 1702;
Q.parlament_girona_pop_young = 1395;
Q.parlament_girona_pop_unemployed = 771;
Q.parlament_girona_pop_bussiness = 744;
Q.parlament_girona_pop_rural = 1891;
Q.parlament_girona_pop_industrial = 927;
Q.parlament_lleida_pop_middle = 552;
Q.parlament_lleida_pop_retired = 1867;
Q.parlament_lleida_pop_young = 1386;
Q.parlament_lleida_pop_unemployed = 556;
Q.parlament_lleida_pop_bussiness = 468;
Q.parlament_lleida_pop_rural = 2673;
Q.parlament_lleida_pop_industrial = 793;
Q.parlament_tarragona_pop_middle = 809;
Q.parlament_tarragona_pop_retired = 1777;
Q.parlament_tarragona_pop_young = 1353;
Q.parlament_tarragona_pop_unemployed = 858;
Q.parlament_tarragona_pop_bussiness = 547;
Q.parlament_tarragona_pop_rural = 1445;
Q.parlament_tarragona_pop_industrial = 1236;


// Previous election results (2010)
Q.ciu_parlament_pv = 38.4;
Q.ciu_parlament_s = 62;
Q.psc_parlament_pv = 18.4;
Q.psc_parlament_s = 28;
Q.ppc_parlament_pv = 12.4;
Q.ppc_parlament_s = 18;
Q.icv_parlament_pv = 7.4;
Q.icv_parlament_s = 10;
Q.erc_parlament_pv = 7.0;
Q.erc_parlament_s = 10;
Q.cs_parlament_pv = 3.4;
Q.cs_parlament_s = 3;
Q.si_parlament_pv = 3.3;
Q.si_parlament_s = 4;

// Support as of November 2012
Q.ciu_parlament_barcelona_buss_support = 23.5;
Q.abstain_parlament_barcelona_buss_support = 25.4;
Q.erc_parlament_barcelona_buss_support = 7.2;
Q.icv_parlament_barcelona_buss_support = 7.9;
Q.psc_parlament_barcelona_buss_support = 6.8;
Q.cs_parlament_barcelona_buss_support = 11.0;
Q.cup_parlament_barcelona_buss_support = 2.2;
Q.si_parlament_barcelona_buss_support = 1.1;
Q.ppc_parlament_barcelona_buss_support = 14.9;
Q.abstain_parlament_barcelona_ind_support = 32.42;
Q.psc_parlament_barcelona_ind_support = 13.64;
Q.ciu_parlament_barcelona_ind_support = 19.19;
Q.icv_parlament_barcelona_ind_support = 10.71;
Q.erc_parlament_barcelona_ind_support = 8.28;
Q.cs_parlament_barcelona_ind_support = 4.85;
Q.ppc_parlament_barcelona_ind_support = 9.09;
Q.cup_parlament_barcelona_ind_support = 1.82;
Q.ciu_parlament_barcelona_middle_support = 17.54;
Q.abstain_parlament_barcelona_middle_support = 27.66;
Q.erc_parlament_barcelona_middle_support = 7.52;
Q.icv_parlament_barcelona_middle_support = 10.02;
Q.psc_parlament_barcelona_middle_support = 6.31;
Q.ppc_parlament_barcelona_middle_support = 13.83;
Q.cs_parlament_barcelona_middle_support = 14.03;
Q.cup_parlament_barcelona_middle_support = 1.9;
Q.si_parlament_barcelona_middle_support = 1.2;
Q.ciu_parlament_barcelona_retired_support = 29.35;
Q.abstain_parlament_barcelona_retired_support = 24.29;
Q.psc_parlament_barcelona_retired_support = 15.99;
Q.erc_parlament_barcelona_retired_support = 8.3;
Q.ppc_parlament_barcelona_retired_support = 17.21;
Q.icv_parlament_barcelona_retired_support = 3.34;
Q.cs_parlament_barcelona_retired_support = 1.52;
Q.erc_parlament_barcelona_rural_support = 26.5;
Q.ciu_parlament_barcelona_rural_support = 25.0;
Q.psc_parlament_barcelona_rural_support = 23.0;
Q.abstain_parlament_barcelona_rural_support = 16.0;
Q.cup_parlament_barcelona_rural_support = 9.5;
Q.abstain_parlament_barcelona_unemployed_support = 42.08;
Q.ciu_parlament_barcelona_unemployed_support = 14.53;
Q.erc_parlament_barcelona_unemployed_support = 8.92;
Q.psc_parlament_barcelona_unemployed_support = 8.42;
Q.icv_parlament_barcelona_unemployed_support = 14.53;
Q.ppc_parlament_barcelona_unemployed_support = 4.11;
Q.cs_parlament_barcelona_unemployed_support = 4.91;
Q.si_parlament_barcelona_unemployed_support = 1.2;
Q.cup_parlament_barcelona_unemployed_support = 1.3;
Q.abstain_parlament_barcelona_young_support = 44.33;
Q.ciu_parlament_barcelona_young_support = 12.54;
Q.erc_parlament_barcelona_young_support = 6.92;
Q.icv_parlament_barcelona_young_support = 10.03;
Q.psc_parlament_barcelona_young_support = 5.02;
Q.cup_parlament_barcelona_young_support = 6.02;
Q.ppc_parlament_barcelona_young_support = 3.81;
Q.cs_parlament_barcelona_young_support = 9.33;
Q.si_parlament_barcelona_young_support = 2.01;
Q.ciu_parlament_girona_buss_support = 31.43;
Q.abstain_parlament_girona_buss_support = 24.2;
Q.erc_parlament_girona_buss_support = 17.1;
Q.psc_parlament_girona_buss_support = 7.73;
Q.ppc_parlament_girona_buss_support = 8.83;
Q.icv_parlament_girona_buss_support = 4.12;
Q.si_parlament_girona_buss_support = 1.23;
Q.cup_parlament_girona_buss_support = 2.79;
Q.cs_parlament_girona_buss_support = 2.57;
Q.ciu_parlament_girona_ind_support = 24.19;
Q.abstain_parlament_girona_ind_support = 28.45;
Q.erc_parlament_girona_ind_support = 16.72;
Q.psc_parlament_girona_ind_support = 11.66;
Q.ppc_parlament_girona_ind_support = 8.83;
Q.icv_parlament_girona_ind_support = 4.66;
Q.cs_parlament_girona_ind_support = 2.33;
Q.cup_parlament_girona_ind_support = 2.03;
Q.si_parlament_girona_ind_support = 1.12;
Q.ciu_parlament_girona_middle_support = 28.12;
Q.abstain_parlament_girona_middle_support = 24.48;
Q.erc_parlament_girona_middle_support = 15.62;
Q.icv_parlament_girona_middle_support = 7.81;
Q.psc_parlament_girona_middle_support = 6.77;
Q.cup_parlament_girona_middle_support = 2.85;
Q.cs_parlament_girona_middle_support = 3.12;
Q.si_parlament_girona_middle_support = 1.04;
Q.ppc_parlament_girona_middle_support = 10.18;
Q.ciu_parlament_girona_retired_support = 44.6;
Q.abstain_parlament_girona_retired_support = 25.39;
Q.erc_parlament_girona_retired_support = 8.29;
Q.psc_parlament_girona_retired_support = 7.77;
Q.ppc_parlament_girona_retired_support = 9.05;
Q.icv_parlament_girona_retired_support = 2.07;
Q.cs_parlament_girona_retired_support = 1.04;
Q.si_parlament_girona_retired_support = 1.55;
Q.cup_parlament_girona_retired_support = 0.24;
Q.ciu_parlament_girona_rural_support = 29.14;
Q.abstain_parlament_girona_rural_support = 32.66;
Q.erc_parlament_girona_rural_support = 16.08;
Q.cup_parlament_girona_rural_support = 5.74;
Q.psc_parlament_girona_rural_support = 5.53;
Q.si_parlament_girona_rural_support = 2.01;
Q.icv_parlament_girona_rural_support = 3.01;
Q.ppc_parlament_girona_rural_support = 3.81;
Q.cs_parlament_girona_rural_support = 2.01;
Q.ciu_parlament_girona_unemployed_support = 31.62;
Q.abstain_parlament_girona_unemployed_support = 29.5;
Q.psc_parlament_girona_unemployed_support = 8.81;
Q.erc_parlament_girona_unemployed_support = 8.83;
Q.icv_parlament_girona_unemployed_support = 6.74;
Q.cs_parlament_girona_unemployed_support = 3.63;
Q.ppc_parlament_girona_unemployed_support = 6.48;
Q.cup_parlament_girona_unemployed_support = 2.33;
Q.si_parlament_girona_unemployed_support = 2.07;
Q.ciu_parlament_girona_young_support = 27.58;
Q.abstain_parlament_girona_young_support = 28.05;
Q.erc_parlament_girona_young_support = 14.81;
Q.psc_parlament_girona_young_support = 11.11;
Q.si_parlament_girona_young_support = 1.06;
Q.cs_parlament_girona_young_support = 3.7;
Q.icv_parlament_girona_young_support = 4.76;
Q.ppc_parlament_girona_young_support = 4.53;
Q.cup_parlament_girona_young_support = 4.4;
Q.ciu_parlament_lleida_buss_support = 30.92;
Q.abstain_parlament_lleida_buss_support = 33.33;
Q.erc_parlament_lleida_buss_support = 10.94;
Q.psc_parlament_lleida_buss_support = 4.69;
Q.icv_parlament_lleida_buss_support = 5.21;
Q.ppc_parlament_lleida_buss_support = 12.83;
Q.si_parlament_lleida_buss_support = 2.08;
Q.ciu_parlament_lleida_ind_support = 25.77;
Q.abstain_parlament_lleida_ind_support = 31.31;
Q.erc_parlament_lleida_ind_support = 18.18;
Q.icv_parlament_lleida_ind_support = 5.56;
Q.psc_parlament_lleida_ind_support = 6.57;
Q.ppc_parlament_lleida_ind_support = 7.56;
Q.cs_parlament_lleida_ind_support = 3.03;
Q.si_parlament_lleida_ind_support = 2.02;
Q.ciu_parlament_lleida_middle_support = 28.32;
Q.abstain_parlament_lleida_middle_support = 28.42;
Q.erc_parlament_lleida_middle_support = 18.95;
Q.psc_parlament_lleida_middle_support = 4.21;
Q.ppc_parlament_lleida_middle_support = 7.99;
Q.icv_parlament_lleida_middle_support = 7.89;
Q.cs_parlament_lleida_middle_support = 3.16;
Q.si_parlament_lleida_middle_support = 1.05;
Q.ciu_parlament_lleida_retired_support = 40.68;
Q.abstain_parlament_lleida_retired_support = 29.47;
Q.erc_parlament_lleida_retired_support = 8.42;
Q.psc_parlament_lleida_retired_support = 6.32;
Q.ppc_parlament_lleida_retired_support = 13.0;
Q.icv_parlament_lleida_retired_support = 2.11;
Q.ciu_parlament_lleida_rural_support = 33.82;
Q.abstain_parlament_lleida_rural_support = 26.8;
Q.erc_parlament_lleida_rural_support = 15.46;
Q.icv_parlament_lleida_rural_support = 4.12;
Q.psc_parlament_lleida_rural_support = 4.64;
Q.ppc_parlament_lleida_rural_support = 4.84;
Q.si_parlament_lleida_rural_support = 2.06;
Q.cs_parlament_lleida_rural_support = 3.61;
Q.cup_parlament_lleida_rural_support = 4.64;
Q.abstain_parlament_lleida_unemployed_support = 38.65;
Q.ciu_parlament_lleida_unemployed_support = 22.09;
Q.erc_parlament_lleida_unemployed_support = 12.56;
Q.psc_parlament_lleida_unemployed_support = 7.73;
Q.icv_parlament_lleida_unemployed_support = 6.28;
Q.si_parlament_lleida_unemployed_support = 1.93;
Q.cs_parlament_lleida_unemployed_support = 3.38;
Q.cup_parlament_lleida_unemployed_support = 3.38;
Q.ppc_parlament_lleida_unemployed_support = 4.0;
Q.abstain_parlament_lleida_young_support = 33.82;
Q.erc_parlament_lleida_young_support = 16.43;
Q.ciu_parlament_lleida_young_support = 24.05;
Q.cup_parlament_lleida_young_support = 2.9;
Q.icv_parlament_lleida_young_support = 5.8;
Q.si_parlament_lleida_young_support = 0.97;
Q.psc_parlament_lleida_young_support = 9.18;
Q.ppc_parlament_lleida_young_support = 3.96;
Q.cs_parlament_lleida_young_support = 2.9;
Q.ciu_parlament_tarragona_buss_support = 25.58;
Q.erc_parlament_tarragona_buss_support = 22.31;
Q.abstain_parlament_tarragona_buss_support = 27.18;
Q.icv_parlament_tarragona_buss_support = 2.02;
Q.cs_parlament_tarragona_buss_support = 7.05;
Q.ppc_parlament_tarragona_buss_support = 12.92;
Q.cup_parlament_tarragona_buss_support = 2.94;
Q.ciu_parlament_tarragona_ind_support = 28.64;
Q.abstain_parlament_tarragona_ind_support = 34.17;
Q.psc_parlament_tarragona_ind_support = 11.06;
Q.icv_parlament_tarragona_ind_support = 7.04;
Q.erc_parlament_tarragona_ind_support = 6.03;
Q.cs_parlament_tarragona_ind_support = 7.54;
Q.ppc_parlament_tarragona_ind_support = 5.53;
Q.ciu_parlament_tarragona_middle_support = 22.61;
Q.abstain_parlament_tarragona_middle_support = 29.15;
Q.erc_parlament_tarragona_middle_support = 10.05;
Q.icv_parlament_tarragona_middle_support = 6.53;
Q.psc_parlament_tarragona_middle_support = 11.06;
Q.cup_parlament_tarragona_middle_support = 5.03;
Q.ppc_parlament_tarragona_middle_support = 6.53;
Q.si_parlament_tarragona_middle_support = 1.01;
Q.cs_parlament_tarragona_middle_support = 8.04;
Q.ciu_parlament_tarragona_retired_support = 35.72;
Q.abstain_parlament_tarragona_retired_support = 30.62;
Q.erc_parlament_tarragona_retired_support = 9.18;
Q.ppc_parlament_tarragona_retired_support = 11.22;
Q.psc_parlament_tarragona_retired_support = 7.14;
Q.cs_parlament_tarragona_retired_support = 3.06;
Q.icv_parlament_tarragona_retired_support = 3.06;
Q.abstain_parlament_tarragona_rural_support = 39.55;
Q.erc_parlament_tarragona_rural_support = 21.47;
Q.icv_parlament_tarragona_rural_support = 6.21;
Q.ciu_parlament_tarragona_rural_support = 9.6;
Q.psc_parlament_tarragona_rural_support = 12.43;
Q.ppc_parlament_tarragona_rural_support = 10.73;
Q.abstain_parlament_tarragona_unemployed_support = 37.62;
Q.ciu_parlament_tarragona_unemployed_support = 20.79;
Q.erc_parlament_tarragona_unemployed_support = 7.92;
Q.psc_parlament_tarragona_unemployed_support = 12.87;
Q.icv_parlament_tarragona_unemployed_support = 5.94;
Q.cs_parlament_tarragona_unemployed_support = 6.93;
Q.ppc_parlament_tarragona_unemployed_support = 4.95;
Q.cup_parlament_tarragona_unemployed_support = 2.97;
Q.abstain_parlament_tarragona_young_support = 31.53;
Q.ciu_parlament_tarragona_young_support = 18.72;
Q.erc_parlament_tarragona_young_support = 8.87;
Q.icv_parlament_tarragona_young_support = 4.92;
Q.ppc_parlament_tarragona_young_support = 9.85;
Q.psc_parlament_tarragona_young_support = 9.85;
Q.cup_parlament_tarragona_young_support = 5.91;
Q.cs_parlament_tarragona_young_support = 8.38;
Q.si_parlament_tarragona_young_support = 1.97;

!}
go-to: election_algorithm.cat_parlament
set-jump: post_election

@1917_1
on-arrival: {!
Q.election_type = "ca";
Q.workers = 20; // 
Q.middle = 8; //
Q.peasants = 60; // 
Q.soldiers = 8; //
Q.underclass = 6;
Q.elites = 2;

Q.russians = 50;
Q.ukrainians = 20;
Q.jews = 4.5;
Q.kyrgyz_kazakh = 3.4;
Q.tatar = 3.4;
Q.other_turkic = 3;
Q.latvians = 1;
Q.estonians = 1;
Q.georgians = 1;
Q.armenians = 1;
Q.germans = 1;
Q.others= 5;
Q.chinese = 0.1;

Q.classes = ['workers', 'middle', 'elites', 'peasants', 'soldiers', 'underclass'];
Q.minorities = ['ukrainians', 'kyrgyz_kazakh', 'tatar', 'other_turkic', 'jews', 'latvians', 'estonians', 'georgians', 'armenians', 'others'];
Q.parties = ['b', 'm', 'sr', 'k', 'popular_socialist', 'conservative', 'other', 'anarchist', 'none'];
Q.minority_parties = ['ukrainian_sr', 'alash', 'musavat', 'dashnak', 'jewish_socialists', 'jewish_national_list', 'muslim_socialists', 'turkic_muslim_parties', 'cossacks'];

// Support for party by social group
// they don't have to sum to 100 since the electoral calculations will be normalized.
Q.workers_b = 10;
Q.workers_m = 50;
Q.workers_sr = 30;
Q.workers_k = 5;
Q.workers_conservative = 2;
Q.workers_popular_socialist = 5;
Q.workers_anarchist = 5;
Q.workers_other = 5;
Q.workers_none = 10;

Q.middle_b = 5;
Q.middle_m = 10;
Q.middle_sr = 10;
Q.middle_k = 40;
Q.middle_conservative = 10;
Q.middle_popular_socialist = 10;
Q.middle_anarchist = 1;
Q.middle_other = 15;
Q.middle_none = 5;

Q.peasants_b = 5;
Q.peasants_m = 5;
Q.peasants_sr = 55;
Q.peasants_k= 5;
Q.peasants_conservative = 10;
Q.peasants_popular_socialist = 10;
Q.peasants_anarchist = 5;
Q.peasants_other = 10;
Q.peasants_none = 10;

Q.underclass_b = 15;
Q.underclass_m = 5;
Q.underclass_sr = 15;
Q.underclass_k = 0;
Q.underclass_conservative = 0;
Q.underclass_popular_socialist = 5;
Q.underclass_anarchist = 15;
Q.underclass_other = 5;
Q.underclass_none = 30;

Q.soldiers_b = 10;
Q.soldiers_m = 20;
Q.soldiers_sr = 40;
Q.soldiers_k = 5;
Q.soldiers_conservative = 2;
Q.soldiers_popular_socialist = 5;
Q.soldiers_anarchist = 6;
Q.soldiers_other = 10;
Q.soldiers_none = 10;

Q.elites_b = 0;
Q.elites_m = 2;
Q.elites_sr = 2;
Q.elites_k = 40;
Q.elites_conservative = 25;
Q.elites_popular_socialist = 5;
Q.elites_anarchist = 0;
Q.elites_other = 12;
Q.elites_none = 10;

// minority party support:
// based on the numbers
Q.ukrainians_ukrainian_sr = 75;
Q.georgians_m = 80;
Q.latvians_b = 75;
Q.armenians_m = 25;
Q.armenians_dashnak = 50;
Q.jews_jewish_national_list = 40;
Q.jews_jewish_socialists = 25;
Q.jews_m = 20;
Q.kyrgyz_kazakh_alash = 50;
Q.tatar_musavat = 30;
Q.kyrgyz_kazakh_muslim_socialists = 20;
Q.kyrgyz_kazakh_turkic_muslim_parties = 20;
Q.tatar_muslim_socialists = 20;
Q.tatar_turkic_muslim_parties = 20;
Q.other_turkic_turkic_muslim_parties = 30;
Q.other_turkic_muslim_socialists = 20;
Q.others_cossacks = 20;
!}
go-to: election_algorithm
set-jump: post_election

@1917_11
on-arrival: {!
// historical results: sr = 47%, 
Q.election_type = "ca";
Q.workers = 20; // 
Q.middle = 8; //
Q.peasants = 60; // 
Q.soldiers = 8; //
Q.underclass = 6;
Q.elites = 2;

Q.russians = 50;
Q.ukrainians = 20;
Q.jews = 4.5;
Q.kyrgyz_kazakh = 3.4;
Q.tatar = 3.4;
Q.other_turkic = 3;
Q.latvians = 1;
Q.estonians = 1;
Q.georgians = 1;
Q.armenians = 1;
Q.germans = 1;
Q.others= 5;
Q.chinese = 0.1;

Q.classes = ['workers', 'middle', 'elites', 'peasants', 'soldiers', 'underclass'];
Q.minorities = ['ukrainians', 'kyrgyz_kazakh', 'tatar', 'other_turkic', 'jews', 'latvians', 'estonians', 'georgians', 'armenians', 'others'];
Q.parties = ['b', 'm', 'sr', 'k', 'popular_socialist', 'conservative', 'other', 'anarchist', 'none'];
Q.minority_parties = ['ukrainian_sr', 'alash', 'musavat', 'dashnak', 'jewish_socialists', 'jewish_national_list', 'muslim_socialists', 'turkic_muslim_parties', 'cossacks'];

// Support for party by social group
// they don't have to sum to 100 since the electoral calculations will be normalized.
Q.workers_b = 60;
Q.workers_m = 5;
Q.workers_sr = 30;
Q.workers_k = 0;
Q.workers_conservative = 0;
Q.workers_popular_socialist = 1;
Q.workers_anarchist = 15;
Q.workers_other = 5;
Q.workers_none = 20;

Q.middle_b = 0;
Q.middle_m = 1;
Q.middle_sr = 10;
Q.middle_k = 80;
Q.middle_conservative = 10;
Q.middle_popular_socialist = 1;
Q.middle_anarchist = 0;
Q.middle_other = 15;
Q.middle_none = 5;

Q.peasants_b = 20;
Q.peasants_m = 1;
Q.peasants_sr = 65;
Q.peasants_k= 1;
Q.peasants_conservative = 1;
Q.peasants_popular_socialist = 1;
Q.peasants_anarchist = 5;
Q.peasants_other = 10;
Q.peasants_none = 10;

Q.underclass_b = 15;
Q.underclass_m = 5;
Q.underclass_sr = 15;
Q.underclass_k = 0;
Q.underclass_conservative = 0;
Q.underclass_popular_socialist = 5;
Q.underclass_anarchist = 15;
Q.underclass_other = 5;
Q.underclass_none = 80;

Q.soldiers_b = 60;
Q.soldiers_m = 2;
Q.soldiers_sr = 40;
Q.soldiers_k = 5;
Q.soldiers_conservative = 2;
Q.soldiers_popular_socialist = 1;
Q.soldiers_anarchist = 6;
Q.soldiers_other = 10;
Q.soldiers_none = 10;

Q.elites_b = 0;
Q.elites_m = 2;
Q.elites_sr = 2;
Q.elites_k = 50;
Q.elites_conservative = 25;
Q.elites_popular_socialist = 0;
Q.elites_anarchist = 0;
Q.elites_other = 12;
Q.elites_none = 10;

// minority party support:
// based on the numbers
Q.ukrainians_ukrainian_sr = 75;
Q.georgians_m = 80;
Q.latvians_b = 75;
Q.armenians_m = 25;
Q.armenians_dashnak = 50;
Q.jews_jewish_national_list = 40;
Q.jews_jewish_socialists = 25;
Q.jews_m = 20;
Q.kyrgyz_kazakh_alash = 50;
Q.tatar_musavat = 30;
Q.kyrgyz_kazakh_muslim_socialists = 20;
Q.kyrgyz_kazakh_turkic_muslim_parties = 20;
Q.tatar_muslim_socialists = 20;
Q.tatar_turkic_muslim_parties = 20;
Q.other_turkic_turkic_muslim_parties = 30;
Q.other_turkic_muslim_socialists = 20;
Q.others_cossacks = 20;
!}
go-to: election_algorithm
set-jump: post_election

@ps_1917_3
on-arrival: {!
Q.election_type = "soviet";
Q.workers = 20; // 
Q.middle = 8; //
Q.peasants = 60; // 
Q.soldiers = 8; //
Q.underclass = 6;
Q.elites = 2;

Q.russians = 50;
Q.ukrainians = 20;
Q.jews = 4.5;
Q.kyrgyz_kazakh = 3.4;
Q.tatar = 3.4;
Q.other_turkic = 3;
Q.latvians = 1;
Q.estonians = 1;
Q.georgians = 1;
Q.armenians = 1;
Q.germans = 1;
Q.others= 5;
Q.chinese = 0.1;

// social groups proportion in Petrograd
Q.workers_petrograd = 55;
Q.middle_petrograd = 20;
Q.peasants_petrograd = 2;
Q.soldiers_petrograd = 8;
Q.underclass_petrograd = 10;
Q.elites_petrograd = 5;


Q.classes = ['workers', 'middle', 'elites', 'peasants', 'soldiers', 'underclass'];
Q.minorities = ['ukrainians', 'kyrgyz_kazakh', 'tatar', 'other_turkic', 'jews', 'latvians', 'estonians', 'georgians', 'armenians', 'others'];
Q.parties = ['b', 'm', 'sr', 'k', 'popular_socialist', 'conservative', 'other', 'anarchist', 'none'];
Q.minority_parties = ['ukrainian_sr', 'alash', 'musavat', 'dashnak', 'jewish_socialists', 'jewish_national_list', 'muslim_socialists', 'turkic_muslim_parties', 'cossacks'];

// Support for party by social group
// they don't have to sum to 100 since the electoral calculations will be normalized.
Q.workers_b = 10;
Q.workers_m = 50;
Q.workers_sr = 35;
Q.workers_k = 2;
Q.workers_conservative = 2;
Q.workers_popular_socialist = 5;
Q.workers_anarchist = 5;
Q.workers_other = 5;
Q.workers_none = 10;

Q.middle_b = 5;
Q.middle_m = 10;
Q.middle_sr = 10;
Q.middle_k = 40;
Q.middle_conservative = 10;
Q.middle_popular_socialist = 10;
Q.middle_anarchist = 1;
Q.middle_other = 15;
Q.middle_none = 5;

Q.peasants_b = 5;
Q.peasants_m = 5;
Q.peasants_sr = 60;
Q.peasants_k = 5;
Q.peasants_conservative = 10;
Q.peasants_popular_socialist = 5;
Q.peasants_anarchist = 5;
Q.peasants_other = 10;
Q.peasants_none = 10;

Q.underclass_b = 15;
Q.underclass_m = 5;
Q.underclass_sr = 15;
Q.underclass_k = 0;
Q.underclass_conservative = 0;
Q.underclass_popular_socialist = 5;
Q.underclass_anarchist = 15;
Q.underclass_other = 5;
Q.underclass_none = 30;

Q.soldiers_b = 10;
Q.soldiers_m = 20;
Q.soldiers_sr = 50;
Q.soldiers_k = 5;
Q.soldiers_conservative = 2;
Q.soldiers_popular_socialist = 5;
Q.soldiers_anarchist = 6;
Q.soldiers_other = 10;
Q.soldiers_none = 10;

Q.elites_b = 0;
Q.elites_m = 2;
Q.elites_sr = 2;
Q.elites_k = 40;
Q.elites_conservative = 25;
Q.elites_popular_socialist = 5;
Q.elites_anarchist = 0;
Q.elites_other = 12;
Q.elites_none = 10;

// minority party support:
// based on the numbers
Q.ukrainians_ukrainian_sr = 75;
Q.georgians_m = 80;
Q.latvians_b = 75;
Q.armenians_m = 25;
Q.armenians_dashnak = 50;
Q.jews_jewish_national_list = 40;
Q.jews_jewish_socialists = 25;
Q.jews_m = 20;
Q.kyrgyz_kazakh_alash = 50;
Q.tatar_musavat = 30;
Q.kyrgyz_kazakh_muslim_socialists = 20;
Q.kyrgyz_kazakh_turkic_muslim_parties = 20;
Q.tatar_muslim_socialists = 20;
Q.tatar_turkic_muslim_parties = 20;
Q.other_turkic_turkic_muslim_parties = 30;
Q.other_turkic_muslim_socialists = 20;
Q.other_cossacks = 20;
!}
go-to: election_algorithm.petrograd_soviet
set-jump: post_election_soviet

@ps_1917_8
on-arrival: {!
Q.election_type = "soviet";
Q.workers = 20; // 
Q.middle = 8; //
Q.peasants = 60; // 
Q.soldiers = 8; //
Q.underclass = 6;
Q.elites = 2;

Q.russians = 50;
Q.ukrainians = 20;
Q.jews = 4.5;
Q.kyrgyz_kazakh = 3.4;
Q.tatar = 3.4;
Q.other_turkic = 3;
Q.latvians = 1;
Q.estonians = 1;
Q.georgians = 1;
Q.armenians = 1;
Q.germans = 1;
Q.others= 5;
Q.chinese = 0.1;

// social groups proportion in Petrograd
Q.workers_petrograd = 55;
Q.middle_petrograd = 20;
Q.peasants_petrograd = 2;
Q.soldiers_petrograd = 8;
Q.underclass_petrograd = 10;
Q.elites_petrograd = 5;

Q.classes = ['workers', 'middle', 'elites', 'peasants', 'soldiers', 'underclass'];
Q.minorities = ['ukrainians', 'kyrgyz_kazakh', 'tatar', 'other_turkic', 'jews', 'latvians', 'estonians', 'georgians', 'armenians', 'others'];
Q.parties = ['b', 'm', 'sr', 'k', 'popular_socialist', 'conservative', 'other', 'anarchist', 'none'];
Q.minority_parties = ['ukrainian_sr', 'alash', 'musavat', 'dashnak', 'jewish_socialists', 'jewish_national_list', 'muslim_socialists', 'turkic_muslim_parties', 'cossacks'];

// Support for party by social group
// they don't have to sum to 100 since the electoral calculations will be normalized.
Q.workers_b = 50;
Q.workers_m = 10;
Q.workers_sr = 30;
Q.workers_k = 0;
Q.workers_conservative = 0;
Q.workers_popular_socialist = 0;
Q.workers_anarchist = 5;
Q.workers_other = 5;
Q.workers_none = 20;

Q.middle_b = 5;
Q.middle_m = 10;
Q.middle_sr = 10;
Q.middle_k = 40;
Q.middle_conservative = 10;
Q.middle_popular_socialist = 10;
Q.middle_anarchist = 1;
Q.middle_other = 15;
Q.middle_none = 5;

Q.peasants_b = 5;
Q.peasants_m = 5;
Q.peasants_sr = 55;
Q.peasants_k= 5;
Q.peasants_conservative = 10;
Q.peasants_popular_socialist = 10;
Q.peasants_anarchist = 5;
Q.peasants_other = 10;
Q.peasants_none = 10;

Q.underclass_b = 15;
Q.underclass_m = 5;
Q.underclass_sr = 15;
Q.underclass_k = 0;
Q.underclass_conservative = 0;
Q.underclass_popular_socialist = 5;
Q.underclass_anarchist = 15;
Q.underclass_other = 5;
Q.underclass_none = 30;

Q.soldiers_b = 50;
Q.soldiers_m = 10;
Q.soldiers_sr = 20;
Q.soldiers_k = 0;
Q.soldiers_conservative = 0;
Q.soldiers_popular_socialist = 2;
Q.soldiers_anarchist = 6;
Q.soldiers_other = 10;
Q.soldiers_none = 20;

Q.elites_b = 0;
Q.elites_m = 2;
Q.elites_sr = 2;
Q.elites_k = 40;
Q.elites_conservative = 25;
Q.elites_popular_socialist = 5;
Q.elites_anarchist = 0;
Q.elites_other = 12;
Q.elites_none = 10;

// minority party support:
// based on the numbers
Q.ukrainians_ukrainian_sr = 75;
Q.georgians_m = 80;
Q.latvians_b = 75;
Q.armenians_m = 25;
Q.armenians_dashnak = 50;
Q.jews_jewish_national_list = 40;
Q.jews_jewish_socialists = 25;
Q.jews_m = 20;
Q.kyrgyz_kazakh_alash = 50;
Q.tatar_musavat = 30;
Q.kyrgyz_kazakh_muslim_socialists = 20;
Q.kyrgyz_kazakh_turkic_muslim_parties = 20;
Q.tatar_muslim_socialists = 20;
Q.tatar_turkic_muslim_parties = 20;
Q.other_turkic_turkic_muslim_parties = 30;
Q.other_turkic_muslim_socialists = 20;
Q.others_cossacks = 20;
!}
go-to: election_algorithm.petrograd_soviet
set-jump: post_election_soviet



@post_election
on-arrival: {!
// Does something need to happen here?
!}
on-display: {!
const data = [];

if (Q.si_parlament_s) {
    data.push({
        "id": "si",
        "legend": "SI",
        "name": "SI",
        "seats": Q.si_parlament_s,
    });
}

if (Q.cup_parlament_s) {
    data.push({
        "id": "cup",
        "legend": "CUP",
        "name": "CUP",
        "seats": Q.cup_parlament_s,
    });
}

if (Q.jxsi_parlament_s) {
    data.push({
        "id": "jxsi",
        "legend": "JxSí",
        "name": "JxSí",
        "seats": Q.jxsi_parlament_s,
    });
}

if (Q.icv_parlament_s) {
    data.push({
        "id": "icv",
        "legend": "ICV-EUiA",
        "name": "ICV-EUiA",
        "seats": Q.icv_parlament_s,
    });
}

if (Q.cecp_parlament_s) {
    data.push({
        "id": "cecp",
        "legend": "CECP",
        "name": "CECP",
        "seats": Q.cecp_parlament_s,
    });
}

if(Q.ecp_parlament_s) {
    data.push({
        "id": "ecp",
        "legend": "ECP-PEC",
        "name": "ECP-PEC",
        "seats": Q.ecp_parlament_s,
    });
}

if (Q.erc_parlament_s) {
    data.push({
        "id": "erc",
        "legend": "ERC",
        "name": "ERC",
        "seats": Q.erc_parlament_s,
    });
}

if (Q.csqp_parlament_s) {
    data.push({
        "id": "csqp",
        "legend": "CSQP",
        "name": "CSQP",
        "seats": Q.csqp_parlament_s,
    });
}

if (Q.psc_parlament_s) {
    data.push({
        "id": "psc",
        "legend": "PSC",
        "name": "PSC",
        "seats": Q.psc_parlament_s,
    });
}

if (Q.junts_parlament_s) {
    data.push({
        "id": "junts",
        "legend": "Junts",
        "name": "Junts",
        "seats": Q.junts_parlament_s,
    });
}

if (Q.cdc_parlament_s) {
    data.push({
        "id": "cdc",
        "legend": "CDC",
        "name": "CDC",
        "seats": Q.cdc_parlament_s,
    });
}

if (Q.pdcat_parlament_s) {
    data.push({
        "id": "pdcat",
        "legend": "PDeCAT",
        "name": "PDeCAT",
        "seats": Q.pdcat_parlament_s,
    });
}

if (Q.cs_parlament_s) {
    data.push({
        "id": "cs",
        "legend": "Cs",
        "name": "Cs",
        "seats": Q.cs_parlament_s,
    });
}

if (Q.ciu_parlament_s) {
    data.push({
        "id": "ciu",
        "legend": "CiU",
        "name": "CiU",
        "seats": Q.ciu_parlament_s,
    });
}

if (Q.unio_parlament_s) {
    data.push({
        "id": "unio",
        "legend": "Unió",
        "name": "Unió",
        "seats": Q.unio_parlament_s,
    });
}

if (Q.ppc_parlament_s) {
    data.push({
        "id": "ppc",
        "legend": "PPC",
        "name": "PPC",
        "seats": Q.ppc_parlament_s,
    });
}

if (Q.ac_parlament_s) {
    data.push({
        "id": "ac",
        "legend": "AC",
        "name": "AC",
        "seats": Q.ac_parlament_s,
    });
}

if (Q.vox_parlament_s) {
    data.push({
        "id": "vox",
        "legend": "Vox",
        "name": "Vox",
        "seats": Q.vox_parlament_s,
    });
}

if (window && d3) {
    var width = 500;
    var height = 500;
    var screenWidth =  document.getElementById('content').offsetWidth;
    if (screenWidth < width - 50) {
        width = screenWidth - 50;
        height = width;
        document.getElementById("parlament").style.height = screenWidth/2 + "px";
    }
    var parliament = d3.parliament();
    parliament.width(width).height(height).innerRadiusCoef(0.4);
    parliament.enter.fromCenter(true).smallToBig(true);
    parliament.exit.toCenter(false).bigToSmall(true);
    d3.select("#parlament").datum(data).call(parliament);
}
!}

= Election Results

{!<svg id="parlament" style="width: 500px; height: 250px;"> </svg>!}

{!<table>!}
{!<tr><td style='min-width: 6em'>Party</td><td style='width: 4em'>Vote</td><td style='width: 4em'>Change</td><td style='width: 5em'>Seats</td><td style='width: 3em'>Change</td></tr>!}
[? if jxsi_parlament_showviz: {!<tr><td><div class="box" style='background-color:#3ab6a5; font-weight:bold;'> </div> !} JxSí {!</td><td>!}[+ jxsi_parlament_pv +]% {!</td><td>!} [+ jxsi_parlament_pv_delta +] {!</td><td>!} [+ jxsi_parlament_s +] {!</td><td>!} [+ jxsi_parlament_s_delta +] {!</td>!}?]
[? if ciu_parlament_showviz: {!<tr><td><div class="box" style='background-color:#002782'> </div> !} CiU {!</td><td>!}[+ ciu_parlament_pv +]% {!</td><td>!} [+ ciu_parlament_pv_delta +] {!</td><td>!} [+ ciu_parlament_s +] {!</td><td>!} [+ ciu_parlament_s_delta +] {!</td>!}?]
[? if cdc_parlament_showviz: {!<tr><td><div class="box" style='background-color:#002782'> </div> !} CDC {!</td><td>!}[+ cdc_parlament_pv +]% {!</td><td>!} [+ cdc_parlament_pv_delta +] {!</td><td>!} [+ cdc_parlament_s +] {!</td><td>!} [+ cdc_parlament_s_delta +] {!</td>!}?]
[? if pdcat_parlament_showviz: {!<tr><td><div class="box" style='background-color:#0081c2'> </div> !} PDeCAT {!</td><td>!}[+ pdcat_parlament_pv +]% {!</td><td>!} [+ pdcat_parlament_pv_delta +] {!</td><td>!} [+ pdcat_parlament_s +] {!</td><td>!} [+ pdcat_parlament_s_delta +] {!</td>!}?]
[? if erc_parlament_showviz: {!<tr><td><div class="box" style='background-color:#ff8000'> </div> !} ERC {!</td><td>!}[+ erc_parlament_pv +]% {!</td><td>!} [+ erc_parlament_pv_delta +] {!</td><td>!} [+ erc_parlament_s +] {!</td><td>!} [+ erc_parlament_s_delta +] {!</td>!}?]
[? if cs_parlament_showviz: {!<tr><td><div class="box" style='background-color:#f6c300'> </div> !} Cs {!</td><td>!}[+ cs_parlament_pv +]% {!</td><td>!} [+ cs_parlament_pv_delta +] {!</td><td>!} [+ cs_parlament_s +] {!</td><td>!} [+ cs_parlament_s_delta +] {!</td>!}?]
[? if psc_parlament_showviz: {!<tr><td><div class="box" style='background-color:#e73b39'> </div> !} PSC {!</td><td>!}[+ psc_parlament_pv +]% {!</td><td>!} [+ psc_parlament_pv_delta +] {!</td><td>!} [+ psc_parlament_s +] {!</td><td>!} [+ psc_parlament_s_delta +] {!</td>!}?]
[? if ppc_parlament_showviz: {!<tr><td><div class="box" style='background-color:#007fff'> </div> !} PPC {!</td><td>!}[+ ppc_parlament_pv +]% {!</td><td>!} [+ ppc_parlament_pv_delta +] {!</td><td>!} [+ ppc_parlament_s +] {!</td><td>!} [+ ppc_parlament_s_delta +] {!</td>!}?]
[? if vox_parlament_showviz: {!<tr><td><div class="box" style='background-color:#63be21'> </div> !} Vox {!</td><td>!}[+ vox_parlament_pv +]% {!</td><td>!} [+ vox_parlament_pv_delta +] {!</td><td>!} [+ vox_parlament_s +] {!</td><td>!} [+ vox_parlament_s_delta +] {!</td>!}?]
[? if icv_parlament_showviz: {!<tr><td><div class="box" style='background-color:#67af2f'> </div> !} ICV-EUiA {!</td><td>!}[+ icv_parlament_pv +]% {!</td><td>!} [+ icv_parlament_pv_delta +] {!</td><td>!} [+ icv_parlament_s +] {!</td><td>!} [+ icv_parlament_s_delta +] {!</td>!}?]
[? if csqp_parlament_showviz: {!<tr><td><div class="box" style='background-color:#c3113b'> </div> !} CSQP {!</td><td>!}[+ csqp_parlament_pv +]% {!</td><td>!} [+ csqp_parlament_pv_delta +] {!</td><td>!} [+ csqp_parlament_s +] {!</td><td>!} [+ csqp_parlament_s_delta +] {!</td>!}?]
[? if cecp_parlament_showviz: {!<tr><td><div class="box" style='background-color:#be3882'> </div> !} CECP {!</td><td>!}[+ cecp_parlament_pv +]% {!</td><td>!} [+ cecp_parlament_pv_delta +] {!</td><td>!} [+ cecp_parlament_s +] {!</td><td>!} [+ cecp_parlament_s_delta +] {!</td>!}?]
[? if ecp_parlament_showviz: {!<tr><td><div class="box" style='background-color:#6e236e'> </div> !} ECP {!</td><td>!}[+ ecp_parlament_pv +]% {!</td><td>!} [+ ecp_parlament_pv_delta +] {!</td><td>!} [+ ecp_parlament_s +] {!</td><td>!} [+ ecp_parlament_s_delta +] {!</td>!}?]
[? if cup_parlament_showviz: {!<tr><td><div class="box" style='background-color:#ffed00'> </div> !} CUP {!</td><td>!}[+ cup_parlament_pv +]% {!</td><td>!} [+ cup_parlament_pv_delta +] {!</td><td>!} [+ cup_parlament_s +] {!</td><td>!} [+ cup_parlament_s_delta +] {!</td>!}?]
[? if unio_parlament_showviz: {!<tr><td><div class="box" style='background-color:#0052a3'> </div> !} Unió {!</td><td>!}[+ unio_parlament_pv +]% {!</td><td>!} [+ unio_parlament_pv_delta +] {!</td><td>!} [+ unio_parlament_s +] {!</td><td>!} [+ unio_parlament_s_delta +] {!</td>!}?]
[? if ac_parlament_showviz: {!<tr><td><div class="box" style='background-color:#064a81'> </div> !} AC {!</td><td>!}[+ ac_parlament_pv +]% {!</td><td>!} [+ ac_parlament_pv_delta +] {!</td><td>!} [+ ac_parlament_s +] {!</td><td>!} [+ ac_parlament_s_delta +] {!</td>!}?]
[? if si_parlament_showviz: {!<tr><td><div class="box" style='background-color:#000000'> </div> !} SI {!</td><td>!}[+ si_parlament_pv +]% {!</td><td>!} [+ si_parlament_pv_delta +] {!</td><td>!} [+ si_parlament_s +] {!</td><td>!} [+ si_parlament_s_delta +] {!</td>!}?]

{!</table>!}

**Government Formation**
# yeah this is hardcoded because its only the simulation scenes

[? if ciu_parlament_showviz: <span style='color: #002782; font-weight: bold;'>CiU</span> will be able to form a <span style='color: #002782; font-style: italic;'>minority government</span> with the toleration of <span style='color: #ff8000; font-weight: bold;'>ERC</span>. ?]

[? if jxsi_parlament_showviz: <span style='color: #3ab6a5; font-weight: bold;'>JxSí</span> will need the toleration of <span style='color: #ffed00; font-weight: bold;'>CUP</span> to form a <span style='color: #3ab6a5; font-style: italic;'>united government</span>. ?]

[? if junts_parlament_showviz: <span style='color: #3ab6a5; font-weight: bold;'>Junts</span> and <span style='color: #ff8000; font-weight: bold;'>ERC</span> will form a <span style='color: #bfa62d; font-style: italic;'>sovereignty government</span> with <span style='color: #ffed00; font-weight: bold;'>CUP</span> toleration. ?]

[? if not (ciu_parlament_showviz or jxsi_parlament_showviz or junts_parlament_showviz): How did we get here??? ?]

@post_election_soviet
on-arrival: {!
// set congress proportion to votes
Q.k_r = Q.k_soviet_votes_dec;
Q.b_r = Q.b_soviet_votes_dec;
Q.m_r = Q.m_soviet_votes_dec;
Q.sr_r = Q.sr_soviet_votes_dec;
Q.popular_socialist_r = Q.popular_socialist_soviet_votes_dec;
Q.anarchist_r = Q.anarchist_soviet_votes_dec;
Q.conservative_r = Q.conservative_soviet_votes_dec;
Q.other_r = Q.other_soviet_votes_dec + Q.k_soviet_votes_dec + Q.conservative_soviet_votes_dec;
// minority parties
!}

**Election results:**

SR: [+ sr_r +]

Mensheviks: [+ m_r +]

Bolsheviks: [+ b_r +]

Popular Socialists: [+ popular_socialist_r +]

Anarchists: [+ anarchist_r +]

Other: [+ other_r +]
